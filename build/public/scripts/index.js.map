{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/public/scripts/index.ts"],"names":[],"mappings":"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","sourcesContent":["//nothin cause it'll assume that its all on the same server alse put io(url)\r\nlet socket = io();\r\n\r\ninterface JQuery{\r\n\ttooltip(): void;\r\n\tpopover(): void;\r\n\tmagnificPopup(MagOptions): void;\r\n}\r\ninterface StorageUser {\r\n\tusername: string;\r\n\ttoken: string;\r\n}\r\ninterface MagOptions {\r\n\toptions: { [key: string]: string | undefined };\r\n}\r\ninterface StorageUser {\r\n\tusername: string;\r\n\ttoken: string;\r\n}\r\ninterface Conversation{\r\n\twithWho: string;\r\n\tunreadMsgs: number;\r\n}\r\n\r\nclass Index {\r\n\tnoMessages = 0;\r\n\twithWhos = [];\r\n\twithWhosOnDisplay = [];\r\n\tchatroom: Messenger;\r\n\r\n\tmainDiv: HTMLElement = document.querySelector('#index-get-started');\r\n\tuserNoExistDiv: HTMLElement = document.querySelector('#index-user-no-exist');\r\n\tnewChatForm: HTMLFormElement = document.querySelector('#new-chat-form');\r\n\tnewChatNameInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#new-chat-name-input');\r\n\tnewChatSubmitButton: HTMLElement = document.querySelector('#new-chat-submit-button');\r\n\tlogoutButton = document.querySelector('.logout-btn');\r\n\t//scroll users online like instagram status\r\n\tactiveUsersCarousel: JQuery<HTMLElement>;\r\n\theaderAuthDiv: HTMLElement = document.querySelector('#header-auth');\r\n\t\r\n\r\n\tinit(){\r\n\t\tthis.queryStarters();\r\n\t\t//this.setIndexMainDisplay();\r\n\t\tif(this.userAvailable()){\r\n\t\t\tthis.socketOnStatus();\r\n\t\t\tthis.socketOnOnline();\r\n\t\t\tthis.socketOnMsgSend();\r\n\r\n\t\t\tthis.onSubmitForm();\r\n\t\t\tthis.getConversations();\r\n\t\t\tthis.getLatestMessages();\r\n\t\t\tthis.setProfileDetails();\r\n\t\t\tthis.onLogout();\r\n\t\t\t//from header\r\n\t\t\tthis.addHeaderAuth();\r\n\t\t\t//this.getHeaderConversations();\r\n\r\n\t\t\t\r\n\t\t\t$('#dropDown').hide();\r\n\t\t}else{\r\n\t\t\tthis.getLoginPage();\r\n\t\t}\r\n\r\n\t\t//used in only 3 places, the 3 buttons beside the input fielf for send message\r\n\t\t// @ts-ignore\r\n\t\tWaves.init();\r\n\t}\r\n\r\n\t//sockets\r\n\tsocketOnOnline = (): void =>{\r\n\t\tsocket.on('online', (onlineInfo: OnlineInfo)=>{\r\n\t\t\tthis.withWhos.forEach((withWho)=>{\r\n\t\t\t\tif(onlineInfo.username === withWho){\r\n\t\t\t\t\tif(onlineInfo.online){\r\n\t\t \t\t\t\tif(!this.withWhosOnDisplay.includes(onlineInfo.username)){\r\n\t\t\t \t\t\t\tthis.withWhosOnDisplay.push(onlineInfo.username);\t\t\t\t \t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.addActiveUser(onlineInfo.username);\r\n\t\t \t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst index = this.withWhosOnDisplay.indexOf(onlineInfo.username);\r\n\t\t \t\t\t\tif(index !== -1){\r\n\t\t\t \t\t\t\tthis.withWhosOnDisplay.splice(index, 1);\r\n\t\t\t\t\t\t\tthis.removeActiveUser(index);\r\n\t\t \t\t\t\t}\r\n\t\t \t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tsocketOnClearUnread = (): void =>{\r\n\t\tsocket.on('unread-cleared', (cleared: boolean)=>{\r\n\t\t\tif(cleared){\r\n\t\t\t\t//this.getConversations();\r\n\t\t\t\tthis.getLatestMessages();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tsocketOnStatus = (): void =>{\r\n\t\tsocket.on('status', (info: StatusInfo)=>{\r\n\t\t\tconst registerSend: RegisterInfo = {\r\n\t\t\t\tusername: this.getCurrentUser().username,\r\n\t\t\t\tsocketId: info.id\r\n\t\t\t}\r\n\t\t\tsocket.emit('register-id', registerSend);\r\n\t\t});\r\n\t}\r\n\tsocketOnMsgSend = (): void =>{\r\n\t\tsocket.on('send-msg', (msg: IMsg)=>{\r\n\t\t\tthis.replaceUserChat(msg);\r\n\t\t});\r\n\t}\r\n\r\n\t//dom manipulator\r\n\tsetIndexMainDisplay = (): void=>{\r\n\t\tif(this.userAvailable()){\r\n\t\t\tthis.mainDiv.innerHTML = `\r\n\t\t\t\t<h2>Get started</h2>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tEnter a username and you will be redirected\r\n\t\t\t\t\tto the chatroom with that user. If the user\r\n\t\t\t\t\tif the username has not yet registered with us,\r\n\t\t\t\t\tyou can invite the :).\r\n\t\t\t\t</p>\r\n\t\t\t\t<h5>Most Recent Chats</h5>\r\n\t\t\t\t<ul id='recent-chat-list'></ul>\r\n\t\t\t`;\r\n\t\t}else{\r\n\t\t\tthis.mainDiv.innerHTML = `\r\n\t\t\t\t<h2>Get an account to get started</h2>\r\n\t\t\t\t<h3>\r\n\t\t\t\t\t<a href=\"/auth/signup\">\r\n\t\t\t\t\t\t<span>Signup</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<h3>\r\n\t\t\t\t\tAlready got an account? \r\n\t\t\t\t\t<a href=\"/auth/login\">\r\n\t\t\t\t\t\t<span>Login</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</h3>\r\n\t\t\t`;\r\n\t\t}\r\n\t}\r\n\tshowUserNoExistDiv = (username: string): void=>{\r\n\t\tthis.userNoExistDiv.innerHTML = `\r\n\t\t\t<p>Sorry the username ${username} does not exist on our database.</p>\r\n\t\t\t<p>You could send an invite. :)</p>\r\n\t\t`;\r\n\t}\r\n\tshowLoader = (): void =>{\r\n\t\tconst itemLoaderDiv = document.createElement('div');\r\n\t\titemLoaderDiv.classList.add('Loader');\r\n\t\tthis.newChatSubmitButton.innerHTML = '';\r\n\t\tthis.newChatSubmitButton && this.newChatSubmitButton.appendChild(itemLoaderDiv);\r\n\t}\r\n\tremoveLoader = (): void =>{\r\n\t\tconst itemLoaderDiv = document.querySelector('.Loader');\r\n\t\tthis.newChatSubmitButton && this.newChatSubmitButton.removeChild(itemLoaderDiv);\r\n\t\tthis.newChatSubmitButton.innerHTML = 'Start Chat';\r\n\t}\r\n\taddActiveUser = (username: string): void =>{\r\n\t\t//for online\r\n\t\t//<div class=\"avatar-xs mx-auto d-block chat-user-img online\">\r\n\t\t//image\r\n\t\t//<img src=\"/images/users/avatar-2.jpg\" alt=\"user-img\" class=\"img-fluid rounded-circle\">\r\n\t\tthis.activeUsersCarousel.trigger('add.owl.carousel', [$(`\r\n\t\t\t<div class=\"item\">\r\n\t            <span class=\"user-status-box\" id=\"user-status-box-${username}\" role=\"button\">\r\n\t                <div class=\"avatar-xs mx-auto d-block chat-user-img away online\">\r\n\t                    <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n\t                        ${username.charAt(0).toUpperCase()}\r\n\t                    </span>\r\n\t                </div>\r\n\t                <span class=\"user-status\"></span>\r\n\t                <h5 class=\"font-size-13 text-truncate mt-3 mb-1\">${username}</h5>\r\n\t            </span>\r\n            </div>\r\n\t\t`)]).trigger('refresh.owl.carousel');\r\n\t\tconst newUser = document.querySelector(`#user-status-box-${username}`)\r\n\t\tnewUser.addEventListener('click', this.onClickChat.bind(this, username));\r\n\t\t/*\r\n\t\tnewUser.addEventListener('click', ()=>{\r\n\t\t\t\t\t$(\".user-chat\").addClass(\"user-chat-show\");\r\n\t\t\t\t});\r\n\t\t*/\r\n\t}\r\n\tremoveActiveUser = (index: number): void =>{\r\n\t\t//this.activeUsersCarousel.removeItem(index).trigger('refresh.owl.carousel');\r\n\t\tthis.activeUsersCarousel.trigger('remove.owl.carousel', index).trigger('refresh.owl.carousel');\r\n\t}\r\n\taddUserChat = (msg: IMsg, timeToDisplay: string, position = 'append'): void=>{\r\n\t\t/**\r\n\t\t* online: <div class=\"chat-user-img online align-self-center me-3 ms-0\">\r\n\t\t* offline: <div class=\"chat-user-img away align-self-center me-3 ms-0\">\r\n\t\t* nothing: <div class=\"chat-user-img align-self-center me-3 ms-0\">\r\n\t\t*/\r\n\t\t//<a href=\"#\"></a>\r\n\t\t//status\r\n        //<span class=\"user-status\"></span>\r\n\t\tconst receiver = (msg.receiver === this.getCurrentUser().username)? msg.sender: msg.receiver;\r\n\t\tconst unread = (!msg.read && msg.sender !== this.getCurrentUser().username)? `\r\n\t\t\t\t<div class=\"unread-message\">\r\n                    <span class=\"badge badge-soft-danger rounded-pill\">01</span>\r\n                </div>`: ` `;\r\n\t\tconst chatItem = document.createElement('li');\r\n\t\tchatItem.innerHTML = `\r\n\t\t\t<span class=\"chat-list-span\" role=\"button\">\r\n                <div class=\"d-flex\">                            \r\n                    <div class=\"chat-user-img online align-self-center me-3 ms-0\">\r\n                        <div class=\"avatar-xs\">\r\n\t                        <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n\t                            ${receiver.charAt(0).toUpperCase()}\r\n\t                        </span>\r\n\t                    </div>\r\n                    </div>\r\n                    <div class=\"flex-1 overflow-hidden\">\r\n                        <h5 class=\"text-truncate font-size-15 mb-1\">${receiver}</h5>\r\n                        <p class=\"chat-user-message text-truncate mb-0\">${msg.message}</p>\r\n                    </div>\r\n                    <div class=\"font-size-11\">${timeToDisplay}</div>\r\n                    ${unread}\r\n                </div>\r\n            </span>\r\n\t\t`;\r\n\t\tchatItem.addEventListener('click', this.onClickChat.bind(this, receiver));\r\n\t\t/*\r\n\t\tchatItem.addEventListener('click', ()=>{\r\n\t\t\t$(\".user-chat\").addClass(\"user-chat-show\");\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\tchatItem.dataset.userReceiver = `${msg.receiver}`;\r\n\t\tchatItem.dataset.userSender = `${msg.sender}`;\r\n\t\tconst chatList = document.querySelector('.chat-list');\r\n\t\tif(position === 'append'){\r\n\t\t\tchatList.appendChild(chatItem);\t\t\t\r\n\t\t}else if(position === 'prepend'){\r\n\t\t\tchatList.prepend(chatItem);;\r\n\t\t}\r\n\t}\r\n\treplaceUserChat = (msg: IMsg): void=>{\r\n\t\tthis.removeUserChat(msg.sender, msg.receiver);\r\n\t\tmsg.timeSent = this.changeDate(msg);\r\n\t\tthis.addUserChat(msg, this.getUserChatTime(msg), 'prepend');\r\n\t}\r\n\tremoveUserChat = (sender: string, receiver: string): void=>{\r\n\t\tconst chatList = document.querySelector('.chat-list');\r\n\t\tconst chatListChildren = chatList.children;\r\n\t\tfor(let i = 0; i < chatListChildren.length; i++){\r\n\t\t\tif(chatListChildren[i].getAttribute('data-user-sender') === sender && \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-receiver') === receiver || \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-sender') === receiver && \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-receiver') === sender){\r\n\t\t\t\tchatListChildren[i].remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetActiveUserChat = (username: string): void=>{\r\n\t\tconst chatList = document.querySelector('.chat-list');\r\n\t\tconst chatListChildren = chatList.children;\r\n\t\tfor(let i = 0; i < chatListChildren.length; i++){\r\n\t\t\tchatListChildren[i].classList.remove('active');\r\n\t\t\tif(chatListChildren[i].getAttribute('data-user-sender') === username || \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-receiver') === username || \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-sender') === username || \r\n\t\t\t\tchatListChildren[i].getAttribute('data-user-receiver') === username){\r\n\t\t\t\tchatListChildren[i].classList.add('active');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetProfileDetails = (): void=>{\r\n\t\tconst subNames = document.querySelectorAll('.profile-user-img');\r\n\t\tfor(let i = 0; i < subNames.length; i++){\r\n\t\t\tsubNames[i].innerHTML = this.getCurrentUser().username.charAt(0).toUpperCase();\r\n\t\t}\r\n\t\tconst names = document.querySelectorAll('.profile-user-name');\r\n\t\tfor(let i = 0; i < names.length; i++){\r\n\t\t\tnames[i].innerHTML = this.getCurrentUser().username;\r\n\t\t}\r\n\t}\r\n\tsetWelcomePackage = (): void=>{\r\n\t\tconst testMsg: IMsg = {\r\n\t\t\tsender: 'Lenzo',\r\n\t\t\treceiver: 'Welcome',\r\n\t\t\t_id: 0,\r\n\t\t\tread: false,\r\n\t\t\tmessage: 'Welcome to my chatapp, Click me!!',\r\n\t\t\ttimeSent: new Date(Date.now()),\r\n\t\t\ttypeOfMsg: MsgTypeEnum.text\r\n\t\t}\r\n\t\tthis.addUserChat(testMsg, this.getTimeOnly(testMsg.timeSent));\t\t\r\n\t}\r\n\tqueryStarters = (): void=>{\r\n\t\t$(\".dropdown-menu a.dropdown-toggle\").on(\"click\",function(t){\r\n\t\t\treturn $(this).next().hasClass(\"show\")\r\n\t\t\t\t||\r\n\t\t\t\t$(this).parents(\".dropdown-menu\")\r\n\t\t\t\t\t\t.first()\r\n\t\t\t\t\t\t.find(\".show\")\r\n\t\t\t\t\t\t.removeClass(\"show\"),\r\n\t\t\t\t$(this).next(\".dropdown-menu\")\r\n\t\t\t\t\t\t.toggleClass(\"show\"),\r\n\t\t\t\t!1\r\n\t\t});\r\n\t\t$(function(){\r\n\t\t\t//tooltip for displaying the title of whatever is hovered on\r\n\t\t\t$('[data-toggle=\"tooltip\"]').tooltip()\r\n\t\t});\r\n\t\t$(function(){\r\n\t\t\t$('[data-toggle=\"popover\"]').popover()\r\n\t\t});\r\n\t\t$(\"#light-dark\").on(\"click\",function(t){\r\n\t\t\t\"disabled\" !== $(\"#bootstrap-style\").attr(\"disabled\")\r\n\t\t\t\t?\r\n\t\t\t\t(\r\n\t\t\t\t\t$(\"#bootstrap-dark-style\").prop(\"disabled\", false),\r\n\t\t\t\t\t$(\"#bootstrap-style\").prop(\"disabled\", true),\r\n\t\t\t\t\t$(\"#app-dark-style\").prop(\"disabled\", false),\r\n\t\t\t\t\t$(\"#app-style\").prop(\"disabled\", true)\r\n\t\t\t\t)\r\n\t\t\t\t:\r\n\t\t\t\t(\r\n\t\t\t\t\t$(\"#bootstrap-dark-style\").prop(\"disabled\", true),\r\n\t\t\t\t\t$(\"#bootstrap-style\").prop(\"disabled\", false),\r\n\t\t\t\t\t$(\"#app-dark-style\").prop(\"disabled\", true),\r\n\t\t\t\t\t$(\"#app-style\").prop(\"disabled\", false)\r\n\t\t\t\t)\r\n\t\t});\r\n\t\t//magnify image to see in full screen\r\n\t\t$(\".popup-img\").magnificPopup({\r\n\t\t\ttype:\"image\",\r\n\t\t\tcloseOnContentClick: true,\r\n\t\t\tmainClass:\"mfp-img-mobile\",\r\n\t\t\timage:{\r\n\t\t\t\tverticalFit: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.activeUsersCarousel = $(\"#user-status-carousel\").owlCarousel({\r\n\t\t\titems: 4,\r\n\t\t\tloop: false,\r\n\t\t\tmargin: 16,\r\n\t\t\tnav: false,\r\n\t\t\tdots: false\r\n\t\t});\r\n\t\t$(\"#chatinputmorelink-carousel\").owlCarousel({\r\n\t\t\titems: 2,\r\n\t\t\tloop: false,\r\n\t\t\tmargin: 16,\r\n\t\t\tnav: false,\r\n\t\t\tdots: false,\r\n\t\t\tresponsive: {\r\n\t\t\t\t0: { items:2 },\r\n\t\t\t\t600: {\r\n\t\t\t\t\titems:5,\r\n\t\t\t\t\tnav: false\r\n\t\t\t\t},\r\n\t\t\t\t992: { items:8 }\r\n\t\t\t}\r\n\t\t});\r\n\t\t$(\"#user-profile-hide\").click(function(){\r\n\t\t\t//to close the user profile sidebar, if its opened it'll hide it\r\n\t\t\t$(\".user-profile-sidebar\").hide();\r\n\t\t\ttoggle(mediaQueryGoesBelow, 'add');\r\n\t\t});\r\n\t\t$(\".user-profile-show\").click(function(){\r\n\t\t\t//show user profile sidebar\r\n\t\t\t$(\".user-profile-sidebar\").show();\r\n\t\t\ttoggle(mediaQueryGoesBelow, 'remove');\r\n\t\t});\r\n\t\t$(\".chat-user-list li a\").click(function(){\r\n\t\t\t//show chat\r\n\t\t\t$(\".user-chat\").addClass(\"user-chat-show\")\r\n\t\t});\r\n\t\t$(\".user-chat-remove\").click(()=>{\r\n\t\t\tthis.chatroom.socketOnDisconnect();\r\n\t\t\t//in mobile view remove user chats\r\n\t\t\t$(\".user-chat\").removeClass(\"user-chat-show\")\r\n\t\t});\r\n\t\tconst toggle = (e: MediaQueryListEvent | MediaQueryList, type: string)=>{\r\n\t\t\tif(e.matches){\r\n\t\t\t\tif(type === 'add'){\r\n\t\t\t\t\tdocument.querySelector('.chat-input-section').classList.add('fixed-bottom');\r\n\t\t\t\t}else if(type === 'remove'){\r\n\t\t\t\t\tdocument.querySelector('.chat-input-section').classList.remove('fixed-bottom');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.querySelector('.chat-input-section').classList.toggle('fixed-bottom');\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst mediaQueryGoesAbove = window.matchMedia('(min-width: 992px)');\r\n\t\tconst mediaQueryGoesBelow = window.matchMedia('(max-width: 992px)');\r\n\t\ttoggle(mediaQueryGoesAbove, 'remove');\r\n\t\ttoggle(mediaQueryGoesBelow, 'add');\r\n\t\tmediaQueryGoesAbove.addListener((e)=>{\r\n\t\t\ttoggle(e, 'remove');\r\n\t\t});\r\n\t\tmediaQueryGoesBelow.addListener((e)=>{\r\n\t\t\ttoggle(e, 'add');\r\n\t\t});\r\n\t}\r\n\t//header\r\n\taddHeaderAuth = (): void=>{\r\n\t\tif(this.headerAuthDiv){\r\n\t\t\tthis.headerAuthDiv.innerHTML = '';\r\n\t\t}\r\n\t\tif(this.userAvailable()){\r\n\t\t\tthis.addMessageBtn();\r\n\t\t\tconst userP = document.createElement('p');\r\n\t\t\tconst logoutBtn = document.createElement('button');\r\n\r\n\t\t\tuserP.innerText = this.getCurrentUser().username;\r\n\t\t\tlogoutBtn.innerText = 'Logout';\r\n\r\n\t\t\tlogoutBtn.addEventListener('click', this.onLogout.bind(this));\r\n\r\n\t\t\tthis.headerAuthDiv && this.headerAuthDiv.appendChild(userP);\r\n\t\t\tthis.headerAuthDiv && this.headerAuthDiv.appendChild(logoutBtn);\r\n\t\t}else{\r\n\t\t\tconst signupLink = document.createElement('a');\r\n\t\t\tconst loginLink = document.createElement('a');\r\n\r\n\t\t\tsignupLink.setAttribute('href', \"/auth/signup\");\r\n\t\t\tloginLink.setAttribute('href', \"/auth/login\");\r\n\r\n\t\t\tsignupLink.innerHTML = `<span>Signup</span>`;\r\n\t\t\tloginLink.innerHTML = `<span>Login</span>`;\r\n\r\n\t\t\tthis.headerAuthDiv && this.headerAuthDiv.appendChild(signupLink);\r\n\t\t\tthis.headerAuthDiv && this.headerAuthDiv.appendChild(loginLink);\r\n\t\t}\t\t\r\n\t} \r\n\taddMessageBtn = (): void =>{\r\n\t\tconst msgDiv = document.createElement('div');\r\n\t\tmsgDiv.innerHTML = '';\r\n\t\tmsgDiv.classList.add('msgsDiv')\r\n\t\tmsgDiv.innerHTML = `\r\n\t\t\t<p>Messages</p>\r\n\t\t\t<span id='no-of-msgs'></span>\r\n\t\t\t<div id='dropDown'>\r\n\t\t\t\t<ul id='dropDown-ul'></ul>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t\tmsgDiv.addEventListener('click', this.onClickMessage.bind(this))\r\n\t\tthis.headerAuthDiv && this.headerAuthDiv.appendChild(msgDiv);\r\n\t}\r\n\taddConvo = (convo: Conversation): void=>{\r\n\t\tconst dropDownLi = document.createElement('li');\r\n\t\tdropDownLi.innerHTML = `<a href='/chatroom/${convo.withWho}'>${convo.withWho}(${convo.unreadMsgs})</a>`;\r\n\t\tconst dropDownUl = document.querySelector('#dropDown-ul');\r\n\t\tdropDownUl.appendChild(dropDownLi);\r\n\t}\r\n\tsetTotalMessages = (noMsgs: number): void=>{\r\n\t\tconst noSpan = document.querySelector('#no-of-msgs');\r\n\t\tnoSpan.innerHTML = `(${noMsgs})`;\r\n\t}\r\n\r\n\t//eventListeners\r\n\tonSubmitForm = (): void=>{\r\n\t\tthis.newChatForm.addEventListener('submit', (e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.showLoader();\r\n\t\t\tif(this.newChatNameInput && this.newChatNameInput.value){\r\n\t\t\t\t//socket.emit('message', this.newChatNameInput.value);\r\n\t\t\t\tthis.chatroomRequest(this.newChatNameInput.value.toLowerCase());\r\n\t\t\t\tthis.removeLoader();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tonClickMessage = (): void=>{\r\n\t\tif($('#dropDown').is(':hidden')){\r\n\t\t\t$('#dropDown').slideDown('slow');\r\n\t\t}else{\r\n\t\t\t$('#dropDown').slideUp('slow');\r\n\t\t}\r\n\t\t/*const list: HTMLElement = document.querySelector('#dropDown');\r\n\t\tif(this.noMessages > 0){\r\n\t\t\tlist.classList.toggle('show-list');\r\n\t\t}*/\r\n\t}\r\n    onLogout = (): void =>{\r\n\t\tthis.logoutButton.addEventListener('click', ()=>{\r\n\t    \tlocalStorage.removeItem('chatapp-user');\r\n\t    \tthis.getLoginPage();\r\n\t    \tthis.addHeaderAuth();\r\n\t\t});\r\n    }\r\n    onClickChat = (username: string): void=>{\r\n\t\tthis.chatroom && this.chatroom.socketOnDisconnect();\r\n\t\tthis.chatroom = new Messenger(username);\r\n\t\tthis.chatroom.init();\r\n\t\tthis.setActiveUserChat(username);\r\n\t\t$(\".user-chat\").addClass(\"user-chat-show\");\r\n    }\r\n\r\n\t//ajax\r\n\tchatroomRequest = (username: string): void=>{\r\n\t\t$.get(`/auth/exist/${username}`)\r\n\t\t .done(response=>{\r\n\t\t\tconst closeBtn = <HTMLButtonElement>document.querySelector('.btn-close');\r\n\t\t\tif(response.data.status){\r\n\t\t\t\tthis.onClickChat(username);\r\n\t\t\t\tcloseBtn.click();\r\n\t\t\t\tthis.newChatNameInput.value = '';\r\n\t\t\t\t//this.getChatRoomPage(username);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('no exist');\r\n\t\t\t\t//<button type=\"button\" class=\"btn btn-link text-decoration-none text-muted font-size-18 py-0\" data-bs-toggle=\"modal\" data-bs-target=\"#addChat\">\r\n\t\t\t\tconst addModalBtn = document.createElement('button');\r\n\t\t\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\t\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#user-no-exist');\r\n\t\t\t\tdocument.body.appendChild(addModalBtn);\r\n\t\t\t\tdocument.querySelector('#username-no-exist-span').innerHTML = username;\r\n\t\t\t\tcloseBtn.click();\r\n\t\t\t\taddModalBtn.click();\r\n\t\t\t\tdocument.body.removeChild(addModalBtn);\r\n\t\t\t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetConversations = (): void => {\r\n\t\tconst username = this.getCurrentUser().username;\r\n\t\t$.get(`/api/active-conversations/${username}`)\r\n\t\t .done((response)=>{\r\n\t\t \tconst conversations: Conversation[] = response.data.conversations;\r\n\t\t \tif(conversations){\r\n\t\t \t\tlet withWhos = [];\r\n\t\t\t \tconversations.forEach(convo=>{\r\n\t\t\t \t\tthis.getUserStatus(convo.withWho)\r\n\t\t\t\t \t\t.done(response=>{\r\n\t\t\t\t \t\t\tif(response.data.status){\r\n\t\t\t\t \t\t\t\tif(!this.withWhosOnDisplay.includes(convo.withWho)){\r\n\t\t\t\t\t \t\t\t\tthis.addActiveUser(convo.withWho);\r\n\t\t\t\t\t \t\t\t\tthis.withWhosOnDisplay.push(convo.withWho);\t\t\t\t \t\t\t\t\t\r\n\t\t\t\t \t\t\t\t}\r\n\t\t\t\t \t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.fail(err=>{\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\twithWhos.push(convo.withWho);\r\n\t\t\t \t});\r\n\t\t\t \tthis.withWhos = withWhos;\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetLatestMessages = (): void =>{\r\n\t\tconst username = this.getCurrentUser().username;\r\n\t\t$.get(`/api/messages/recent/${username}`)\r\n\t\t .done((response)=>{\r\n\t\t \t//next to do sort by time and display time or date\r\n\t\t \tconst msgs: IMsg[] = response.data.messages;\r\n\t\t \tif(msgs.length > 0){\r\n\t\t\t \tmsgs.sort((a, b)=>{\r\n\t\t\t \t\tconst aa = new Date(a.timeSent);\r\n\t\t\t \t\tconst bb = new Date(b.timeSent);\r\n\t\t\t \t\treturn (bb.valueOf() - aa.valueOf());\r\n\t\t\t \t});\r\n\t\t \t\tmsgs.forEach((msg)=>{\r\n\t\t \t\t\t//create api endpoint to check unread messages;\r\n\t\t \t\t\tmsg.timeSent = this.changeDate(msg);\r\n\t\t \t\t\tthis.addUserChat(msg, this.getUserChatTime(msg));\r\n\t\t \t\t});\r\n\t\t \t\t//this.setWelcomePackage();\r\n\t\t \t}else{\r\n\t\t \t\tthis.setWelcomePackage();\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\t\r\n\t//header\r\n\tgetHeaderConversations = (): void => {\r\n\t\tconst username = this.getCurrentUser().username;\r\n\t\t$.get(`/api/active-conversations/${username}`)\r\n\t\t .done((response)=>{\r\n\t\t \tconst conversations: Conversation[] = response.data.conversations;\r\n\t\t \tif(conversations){\r\n\t\t\t \tconversations.forEach(convo=>{\r\n\t\t\t \t\tif(convo.unreadMsgs > 0){\r\n\t\t\t\t \t\tthis.noMessages += convo.unreadMsgs;\r\n\t\t\t\t\t\tthis.addConvo(convo);\r\n\t\t\t \t\t}\r\n\t\t\t \t});\r\n\t\t\t \tif(this.noMessages > 0){\r\n\t\t\t\t \tthis.setTotalMessages(this.noMessages);\r\n\t\t\t \t}\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetUserStatus = (username: string): JQueryPromise<any> =>{\r\n\t\treturn $.get(`/auth/status/${username}`);\t\t \r\n\t}\r\n\r\n\t//utils\r\n\tchangeDate = (msg: IMsg): Date =>{ return new Date(msg.timeSent); }\r\n\tgetTimeOnly = (dateObj: Date): string =>{ \r\n\t\treturn `\r\n\t\t\t${dateObj.getHours()}:${(dateObj.getMinutes()<10)? \r\n\t\t\t\t'0' + dateObj.getMinutes(): dateObj.getMinutes()}\r\n\t\t`; \r\n\t}\r\n\tgetUserChatTime = (msg: IMsg): string=>{\r\n\t\tlet today  = new Date().toDateString().substr(4);\r\n\t\tlet timeToDisplay = '';\r\n\t\tif(today !== msg.timeSent.toDateString().substr(4)){\r\n\t\t\ttimeToDisplay = msg.timeSent.toDateString().substr(4);\r\n\t\t}else{\r\n\t\t\ttimeToDisplay = this.getTimeOnly(msg.timeSent);\r\n\t\t}\r\n\t\treturn timeToDisplay;\t\t\r\n\t}\r\n    getCurrentUser = (): StorageUser =>{\r\n    \treturn JSON.parse(localStorage.getItem('chatapp-user'));\r\n    }\r\n    userAvailable = (): boolean =>{\r\n    \tif(JSON.parse(localStorage.getItem('chatapp-user'))){\r\n    \t\treturn true;\r\n    \t}\r\n    \treturn false;\r\n    }\r\n\tgetChatRoomPage = (username: string): void =>{\r\n\t\twindow.location.href = `/chatroom/${username}`;\r\n\t}\r\n\t//header\r\n\tgetIndexPage = (): void =>{\r\n\t\twindow.location.href = '/';\r\n\t}\r\n\tgetLoginPage = (): void =>{\r\n\t\twindow.location.href = '/auth/login';\r\n\t}\r\n}\r\n\r\nconst index = new Index();\r\nindex.init();"]}