{"version":3,"file":"group-chatroom.js","sourceRoot":"","sources":["../../../src/public/scripts/group-chatroom.ts"],"names":[],"mappings":"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","sourcesContent":["const enum groupMessengerProps {\r\n\tmessages = 'messages',\r\n\tform = 'form',\r\n\tmsgInput = 'msgInput',\r\n\tgroupOnlineDot = 'groupOnlineDot'\r\n};\r\ninterface RegisterGroupMessenger extends RegisterInfo{\r\n\tgroupname: string\r\n}\r\nclass GroupMessenger{\r\n\tsocket = io();\r\n\tlastDate = '';\r\n\tmessageData: { [key: string]: string};\r\n\tgroupDetails: Group;\r\n\r\n\tgroupProfileImgSmall: HTMLElement = document.querySelector('.chat-user-avatar-container-small');\r\n\tgroupProfileImgBig: HTMLElement = document.querySelector('.chat-user-avatar-container-big');\r\n\tgroupProfileName: NodeListOf<HTMLElement> = document.querySelectorAll('.chat-user-name');\r\n\tgroupOnlineDot: NodeListOf<HTMLElement> = document.querySelectorAll('.chat-user-online-dot');\r\n\taddUserToGroupForm: HTMLFormElement = document.querySelector('#add-user-group-form');\r\n\taddUserGroupSubmitButton: HTMLElement = document.querySelector('#add-user-submit-button');\r\n\r\n\tmessages: HTMLElement = document.querySelector('#chatroom-messages');\r\n\tmsgInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#chatroom-msg');\r\n\tform: Element = document.querySelector('#chatroom-form');\r\n\temojiBtn: HTMLElement = document.querySelector('.emoji-btn');\r\n\tattachBtn: HTMLInputElement = document.querySelector('#chat-input-file');\r\n\tfileForm: Element = document.querySelector('#send-file-form');\r\n\r\n\t// @ts-ignore\r\n\tpicker = new FgEmojiPicker({\r\n\t\ttrigger: ['.emoji-btn'],\r\n\t\tposition: ['top', 'left'],\r\n\t\tdir: '/libs/vanilla-javascript-emoji-picker/',\r\n\t\tpreFetch: true,\r\n\t\tinsertInto: this.msgInput,\r\n\t\temit(ogj, triggerElement){ }\r\n\t});\r\n\r\n\tconstructor(public groupname: string){}\r\n\tsetMessageData = (): void =>{\r\n\t\tthis.messageData = {\r\n\t\t\tmsg: this.msgInput && this.msgInput.value,\r\n\t\t\tsender: this.getCurrentUser().username,\r\n\t\t\treceiver: this.groupname\r\n\t\t}\r\n\t}\r\n\tresetDOMs = (groupMessengerPropsToReset: string): void =>{\r\n\t\tswitch (groupMessengerPropsToReset) {\r\n\t\t\tcase groupMessengerProps.messages:\r\n\t\t\t\tthis[groupMessengerProps.messages] = document.querySelector('#chatroom-messages');\r\n\t\t\t\tbreak;\r\n\t\t\tcase groupMessengerProps.form:\r\n\t\t\t\tthis[groupMessengerProps.form] = document.querySelector('#chatroom-form');\r\n\t\t\t\tbreak;\r\n\t\t\tcase groupMessengerProps.msgInput:\r\n\t\t\t\tthis[groupMessengerProps.msgInput] = <HTMLInputElement>document.querySelector('#chatroom-msg');\r\n\t\t\t\tbreak;\r\n\t\t\tcase groupMessengerProps.groupOnlineDot:\r\n\t\t\t\t//this[groupMessengerProps.groupOnlineDot] = document.querySelector('.user-online-dot');\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tinit = (): void => {\r\n\t\tthis.setMessageData();\r\n\t\tthis.getGroupDetails();\r\n\t\tif(!this.userAvailable()){\r\n\t\t\tthis.getLoginPage();\r\n\t\t}\t\t\t\t\r\n\t\tif(this.messages){\r\n\t\t\tthis.messages.innerHTML = 'Loading.....';\r\n\t\t}\r\n\t\tif(this.groupname !== 'Welcome'){\r\n\t\t\t//initialize sockets\r\n\t\t\tthis.socketOnStatus();\r\n\t\t\tthis.socketOnMsgSend();\r\n\t\t\tthis.socketOnMsgDelete();\r\n\t\t\tthis.socketOnReceiveTyping();\r\n\r\n\t\t\tthis.getAttachmentMessages(this.groupname);\r\n\t\t\tthis.getGroupMessage();\t\t\t\r\n\r\n\t\t\tthis.onAddSendTextMessage();\r\n\t\t\tthis.onAddSendFileMessage();\r\n\t\t\tthis.onAddUserGroupSubmitForm();\r\n\t\t\tthis.onTypingRelated();\r\n\t\t\tthis.onAttchBtnClick();\r\n\t\t\t//this.onEmojiKeyboardInit();\r\n\t\t}\r\n\t}\r\n\r\n\t//sockets\r\n\tsocketOnStatus = (): void =>{\r\n\t\tthis.socket.on('status', (info: StatusInfo)=>{\r\n\t\t\tthis.setStatus(this.groupname);\r\n\t\t\tthis.setMessageData();\r\n\t\t\tconst registerSend: RegisterGroupMessenger = {\r\n\t\t\t\tusername: this.messageData.sender,\r\n\t\t\t\tgroupname: this.messageData.receiver,\r\n\t\t\t\tsocketId: info.id\r\n\t\t\t}\r\n\t\t\tthis.clearUnreadMsg();\r\n\t\t\tthis.socket.emit('register-grouproom', registerSend);\r\n\t\t});\r\n\t}\r\n\tsocketOnMsgSend = (): void =>{\r\n\t\tthis.socket.on('send-msg', (msg: IMsg)=>{\r\n\t\t\tmsg.timeSent = this.changeDate(msg);\r\n\t\t\tif(!this.lastDate || this.lastDate !== msg.timeSent.toDateString().substr(4)){\r\n\t\t\t\tthis.displayMsgsDate('Today');\r\n\t\t\t\tthis.lastDate = msg.timeSent.toLocaleDateString();\r\n\t\t\t}\r\n\t\t\tthis.addMessage(msg);\r\n\t\t});\r\n\t}\r\n\tsocketOnMsgDelete = (): void =>{\r\n\t\t//add feature\r\n\t\t//subtly remove delete element\r\n\t\tthis.socket.on('delete-msg', (data)=>{\r\n\t\t\tthis.removeMessage(data.msgDeleted._id);\r\n\t\t});\r\n\t}\r\n\tsocketOnDisconnect =(): void=>{ \r\n\t\tthis.socket.emit('grouproom-disconnect');\r\n\t\tdocument.querySelector('.group-description').innerHTML = `Hi, I'm available`;\r\n\t\tthis.onRemoveSendTextMessage();\r\n\t\tthis.onRemoveSendFileMessage();\r\n\t\tthis.onTypingRelatedRemove();\r\n\t}\r\n\tsocketOnSendTyping = (typing: boolean): void=>{\r\n\t\tthis.socket.emit('typing', { \r\n\t\t\tusernames: {\r\n\t\t\t\tsender: this.messageData.sender,\r\n\t\t\t\treceiver: this.messageData.receiver\r\n\t\t\t},\r\n\t\t\ttyping: typing\r\n\t\t});\r\n\t}\r\n\tsocketOnReceiveTyping = (): void=>{\r\n\t\tthis.socket.on('io-typing', (userData: Typings)=>{\r\n\t\t\tif(userData.usernames.receiver === this.messageData.sender){\r\n\t\t\t\tif(userData.typing){\r\n\t\t\t\t\tthis.addTyping(userData.usernames.sender);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.removeTyping();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tsocketOnClearUnread = (): void =>{\r\n\t\tsocket.on('unread-cleared', (cleared: boolean)=>{\r\n\t\t\tif(cleared){\r\n\t\t\t\t//set message to read on display\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//DOM changers\r\n\taddMessage = (msgObj: IMsg): void => {\r\n\t\tswitch (msgObj.typeOfMsg) {\r\n\t\t\tcase MsgTypeEnum.text:\r\n\t\t\t\tthis.addTextMessage(msgObj);\r\n\t\t\t\tbreak;\r\n\t\t\tcase MsgTypeEnum.img:\r\n\t\t\t\tthis.addImgMessage(msgObj);\r\n\t\t\t\tbreak;\r\n\t\t\tcase MsgTypeEnum.otherfile:\r\n\t\t\t\tthis.addOtherFileMessage(msgObj);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.addTextMessage(msgObj);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\taddTextMessage = (msgObj: IMsg): void=>{\r\n\t\t`\t\t\r\n            <item>\r\n                <itemMainDiv>\r\n                    //<itemAvatarDiv />\r\n\r\n                    <itemContentDiv>\r\n                        <itemContentWrapperDiv>\r\n                            <itemContentWrapperDivOne />\r\n\r\n                            <itemContentWrapperDivTwo>\r\n                                --inserted\r\n\r\n                                <itemDropDowmMenu>\r\n                                    <dropdowmFrag />\r\n                                </itemDropDowmMenu>\r\n                            </itemContentWrapperDivTwo>\r\n                        </itemContentWrapperDiv>\r\n\r\n                        //<itemName />\r\n                    </itemContentDiv>\r\n                </itemMainDiv>\r\n            </item>\r\n\t\t`;\r\n\t\t//conversation-name\r\n\t\tconst itemName = document.createElement('div');\r\n\t\titemName.classList.add('conversation-name');\r\n\t\titemName.innerHTML = `${msgObj.sender}`;\r\n\r\n\t\tconst dropdowmFrag = new DocumentFragment();\r\n\t\tconst dropdownData = [\r\n\t\t\t{ text: 'Copy', iconClass: 'file-copy' },\r\n\t\t\t{ text: 'Save', iconClass: 'save' },\r\n\t\t\t{ text: 'Forward', iconClass: 'chat-forward' },\r\n\t\t\t{ text: 'Delete', iconClass: 'delete-bin' }\r\n\t\t];\r\n\t\tdropdownData.forEach(data=>{\r\n\t\t\tconst dropdownItem = document.createElement('span');\r\n\t\t\tdropdownItem.addEventListener('click', this.onMessageCollection.bind(this, data.text, { id: msgObj._id, text: data.text }));\r\n\t\t\t//dropdownItem.addEventListener('click', this.deleteMessage.bind(this, msgObj._id));\r\n\t\t\tdropdownItem.setAttribute('role', 'button');\r\n\t\t\tdropdownItem.classList.add('dropdown-item');\r\n\t\t\tdropdownItem.innerHTML = `\r\n            \t${data.text}\r\n            \t<i class=\"ri-${data.iconClass}-line float-end text-muted\"></i>\r\n\t\t\t`;\r\n\t\t\tdropdowmFrag.appendChild(dropdownItem);\r\n\t\t});\r\n\r\n\t\t//dropdown-menu\r\n\t\tconst itemDropDowmMenu = document.createElement('div');\r\n\t\titemDropDowmMenu.classList.add('dropdown-menu');\r\n\t\titemDropDowmMenu.appendChild(dropdowmFrag);\r\n\r\n\t\t//dropdown\r\n\t\tconst itemContentWrapperDivTwo = document.createElement('div');\r\n\t\titemContentWrapperDivTwo.classList.add('dropdown', 'align-self-start');\r\n\t\titemContentWrapperDivTwo.insertAdjacentHTML(\r\n\t\t\t'afterbegin',\r\n\t\t\t`<span class=\"dropdown-toggle dropdown-click invisible\" role=\"button\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"ri-more-2-fill\"></i>\r\n            </span>`\r\n        );\r\n        itemContentWrapperDivTwo.insertAdjacentElement('beforeend', itemDropDowmMenu);\r\n\r\n\t\t//ctext-wrap-content\r\n\t\tconst itemContentWrapperDivOne = document.createElement('div');\r\n\t\titemContentWrapperDivOne.classList.add('ctext-wrap-content')\r\n\t\titemContentWrapperDivOne.innerHTML = `\r\n            <p class=\"mb-0\">\r\n                ${msgObj.message}\r\n            </p>\r\n            <p class=\"chat-time mb-0\"><i class=\"ri-time-line align-middle\"></i> <span class=\"align-middle\">${this.getTimeOnly(msgObj.timeSent)}</span></p>\t\t\t\r\n\t\t`;\r\n\r\n\t\t//ctext-wrap\r\n\t\tconst itemContentWrapperDiv = document.createElement('div');\r\n\t\titemContentWrapperDiv.classList.add('ctext-wrap');\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivOne);\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivTwo);\r\n\r\n\t\t//user-chat-content\r\n\t\tconst itemContentDiv = document.createElement('div');\r\n\t\titemContentDiv.classList.add('user-chat-content');\r\n\t\titemContentDiv.appendChild(itemContentWrapperDiv);\r\n\t\titemContentDiv.appendChild(itemName);\r\n\r\n\t\t//chat-avatar\r\n\t\tconst itemAvatarDiv = document.createElement('div');\r\n\t\titemAvatarDiv.classList.add('chat-avatar');\r\n\t\titemAvatarDiv.innerHTML = `\r\n        <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n            ${msgObj.sender.charAt(0).toUpperCase()}\r\n        </span>\r\n\t\t`;\r\n\r\n\t\t//conversation-list\r\n\t\tconst itemMainDiv = document.createElement('div');\r\n\t\titemMainDiv.classList.add('conversation-list');\r\n\t\titemMainDiv.appendChild(itemAvatarDiv);\r\n\t\titemMainDiv.appendChild(itemContentDiv);\t\t\r\n\r\n\t\tconst item = document.createElement('li');\r\n\r\n\t\titem.addEventListener('mouseover', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('touchstart', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('mouseleave', this.onHoverLeaveMessage.bind(this));\r\n\t\titem.addEventListener('touchend', this.onHoverLeaveMessage.bind(this));\r\n\r\n\t\titem.dataset.id = `${msgObj._id}`;\r\n\t\titem.classList.add((msgObj.sender === this.messageData.sender)?  'right': 'irrelevant');\r\n\t\titem.appendChild(itemMainDiv);\r\n\r\n\r\n\t\t//OLD\r\n\t\tthis.messages && this.messages.appendChild(item);\r\n\t\t$('.chat-conversation .simplebar-content-wrapper').scrollTop(40000);\r\n\t}\r\n\taddImgMessage = (msgObj: IMsg): void=>{\r\n\t\t`\t\t\r\n            <item>\r\n                <itemMainDiv>\r\n                    //<itemAvatarDiv />\r\n\r\n                    <itemContentDiv>\r\n                        <itemContentWrapperDiv>\r\n                            <itemContentWrapperDivOne>\r\n\t\t\t\t\t\t\t\t<msgImg>\r\n\t\t\t\t\t\t\t\t\t<msgImgList>\r\n\t\t                            \t<msgImgListDivTwo />\r\n\t\t\t\t\t\t\t\t\t\t<msgImgListDivOne />\r\n\t\t\t\t\t\t\t\t\t</msgImgList>\r\n\t\t\t\t\t\t\t\t</msgImg>\r\n\t\t\t\t\t\t\t\t--inserted chat-time\r\n                            </itemContentWrapperDivOne>\r\n\r\n                            <itemContentWrapperDivTwo>\r\n                                --inserted\r\n\r\n                                <itemDropDowmMenu>\r\n                                    <dropdowmFrag />\r\n                                </itemDropDowmMenu>\r\n                            </itemContentWrapperDivTwo>\r\n                        </itemContentWrapperDiv>\r\n\r\n                        //<itemName />\r\n                    </itemContentDiv>\r\n                </itemMainDiv>\r\n            </item>\r\n\t\t`;\r\n\t\t//conversation-name\r\n\t\tconst itemName = document.createElement('div');\r\n\t\titemName.classList.add('conversation-name');\r\n\t\titemName.innerHTML = `${msgObj.sender}`;\r\n\r\n\t\tconst dropdowmFrag = new DocumentFragment();\r\n\t\tconst dropdownData = [\r\n\t\t\t{ text: 'Copy', iconClass: 'file-copy' },\r\n\t\t\t{ text: 'Save', iconClass: 'save' },\r\n\t\t\t{ text: 'Forward', iconClass: 'chat-forward' },\r\n\t\t\t{ text: 'Delete', iconClass: 'delete-bin' }\r\n\t\t];\r\n\t\tdropdownData.forEach(data=>{\r\n\t\t\tconst dropdownItem = document.createElement('span');\r\n\t\t\tdropdownItem.addEventListener('click', this.onMessageCollection.bind(this, data.text, { id: msgObj._id, text: data.text }));\r\n\t\t\t//dropdownItem.addEventListener('click', this.deleteMessage.bind(this, msgObj._id));\r\n\t\t\tdropdownItem.setAttribute('role', 'button');\r\n\t\t\tdropdownItem.classList.add('dropdown-item');\r\n\t\t\tdropdownItem.innerHTML = `\r\n            \t${data.text}\r\n            \t<i class=\"ri-${data.iconClass}-line float-end text-muted\"></i>\r\n\t\t\t`;\r\n\t\t\tdropdowmFrag.appendChild(dropdownItem);\r\n\t\t});\r\n\r\n\t\t//dropdown-menu\r\n\t\tconst itemDropDowmMenu = document.createElement('div');\r\n\t\titemDropDowmMenu.classList.add('dropdown-menu');\r\n\t\titemDropDowmMenu.appendChild(dropdowmFrag);\r\n\r\n\t\t//dropdown\r\n\t\tconst itemContentWrapperDivTwo = document.createElement('div');\r\n\t\titemContentWrapperDivTwo.classList.add('dropdown', 'align-self-start');\r\n\t\titemContentWrapperDivTwo.insertAdjacentHTML(\r\n\t\t\t'afterbegin',\r\n\t\t\t`<span class=\"dropdown-toggle dropdown-click invisible\" role=\"button\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"ri-more-2-fill\"></i>\r\n            </span>`\r\n        );\r\n        itemContentWrapperDivTwo.insertAdjacentElement('beforeend', itemDropDowmMenu);\r\n\r\n        const msgImgListDivTwo = document.createElement('div');\r\n        msgImgListDivTwo.classList.add('message-img-link', 'btn');\r\n        msgImgListDivTwo.innerHTML = `\r\n        \t<span>\r\n                <i class=\"ri-download-2-line\"></i>\r\n            </span>\r\n        `;\r\n        msgImgListDivTwo.addEventListener('click', ()=>{\r\n        \tthis.getFIle(this.updateFileURL(msgObj.fileURL), msgObj.message);\r\n        });\r\n\r\n        const msgImgListDivOne = document.createElement('div');\r\n        msgImgListDivOne.innerHTML = `\r\n        \t<div>\r\n                <span class=\"popup-img d-inline-block m-1\" href=\"${this.updateFileURL(msgObj.fileURL)}\" title=\"${msgObj.message}\">\r\n                    <img src=\"${this.updateFileURL(msgObj.fileURL)}\" alt=\"\" class=\"rounded border\">\r\n                </span>\r\n            </div>\r\n        `;\r\n\r\n        const msgImgList = document.createElement('li');\r\n        msgImgList.classList.add('list-inline-item', 'message-img-list', 'me-2', 'ms-0');\r\n        msgImgList.appendChild(msgImgListDivOne);\r\n        msgImgList.appendChild(msgImgListDivTwo);\r\n\r\n        const msgImg = document.createElement('ul');\r\n        msgImg.classList.add('list-inline', 'message-img', 'mb-0');\r\n        msgImg.appendChild(msgImgList);\r\n\r\n\t\t//ctext-wrap-content\r\n\t\tconst itemContentWrapperDivOne = document.createElement('div');\r\n\t\titemContentWrapperDivOne.classList.add('ctext-wrap-content');\r\n        itemContentWrapperDivOne.insertAdjacentElement('afterbegin', msgImg);\r\n        itemContentWrapperDivOne.insertAdjacentHTML(\r\n        \t'beforeend',\r\n        \t`<p class=\"chat-time mb-0\"><i class=\"ri-time-line align-middle\"></i> <span class=\"align-middle\">${this.getTimeOnly(msgObj.timeSent)}</span></p>`\r\n        );\r\n\r\n\t\t//ctext-wrap\r\n\t\tconst itemContentWrapperDiv = document.createElement('div');\r\n\t\titemContentWrapperDiv.classList.add('ctext-wrap');\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivOne);\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivTwo);\r\n\r\n\t\t//user-chat-content\r\n\t\tconst itemContentDiv = document.createElement('div');\r\n\t\titemContentDiv.classList.add('user-chat-content');\r\n\t\titemContentDiv.appendChild(itemContentWrapperDiv);\r\n\t\titemContentDiv.appendChild(itemName);\r\n\r\n\t\t//chat-avatar\r\n\t\tconst itemAvatarDiv = document.createElement('div');\r\n\t\titemAvatarDiv.classList.add('chat-avatar');\r\n\t\titemAvatarDiv.innerHTML = `\r\n\t        <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n\t            ${msgObj.sender.charAt(0).toUpperCase()}\r\n\t        </span>\r\n\t\t`;\r\n\r\n\t\t//conversation-list\r\n\t\tconst itemMainDiv = document.createElement('div');\r\n\t\titemMainDiv.classList.add('conversation-list');\r\n\t\titemMainDiv.appendChild(itemAvatarDiv);\r\n\t\titemMainDiv.appendChild(itemContentDiv);\t\t\r\n\r\n\t\tconst item = document.createElement('li');\r\n\r\n\t\titem.addEventListener('mouseover', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('touchstart', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('mouseleave', this.onHoverLeaveMessage.bind(this));\r\n\t\titem.addEventListener('touchend', this.onHoverLeaveMessage.bind(this));\r\n\r\n\t\titem.dataset.id = `${msgObj._id}`;\r\n\t\titem.classList.add((msgObj.sender === this.messageData.sender)?  'right': 'irrelevant');\r\n\t\titem.appendChild(itemMainDiv);\r\n\r\n\r\n\t\t//OLD\r\n\t\tthis.messages && this.messages.appendChild(item);\r\n\t\t$('.chat-conversation .simplebar-content-wrapper').scrollTop(40000);\r\n\t\t$(\".popup-img\").magnificPopup({\r\n\t\t\ttype:\"image\",\r\n\t\t\tcloseOnContentClick: true,\r\n\t\t\tmainClass:\"popup-img\",\r\n\t\t\timage:{\r\n\t\t\t\tverticalFit: true\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\taddOtherFileMessage = (msgObj: IMsg): void=>{\r\n\t\t`\t\t\r\n            <item>\r\n                <itemMainDiv>\r\n                    //<itemAvatarDiv />\r\n\r\n                    <itemContentDiv>\r\n                        <itemContentWrapperDiv>\r\n                            \r\n                            <itemContentWrapperDivOne>\r\n\t\t\t\t\t\t\t\t<card>\r\n\t\t\t\t\t\t\t\t\t<cardInnerDiv>\r\n\t\t\t\t\t\t\t\t\t\t<cardInnerDivSubOne />\r\n\t\t\t\t\t\t\t\t\t\t<cardInnerDivSubTwo />\r\n\t\t\t                            <cardInnerDivSubThree />\r\n\t\t\t\t\t\t\t\t\t</cardInnerDiv>\r\n\t\t\t\t\t\t\t\t</card>\r\n\t\t\t\t\t\t\t\t--inserted chat-time\r\n                            </itemContentWrapperDivOne>\r\n\r\n                            <itemContentWrapperDivTwo>\r\n                                --inserted\r\n\r\n                                <itemDropDowmMenu>\r\n                                    <dropdowmFrag />\r\n                                </itemDropDowmMenu>\r\n                            </itemContentWrapperDivTwo>\r\n                        </itemContentWrapperDiv>\r\n\r\n                        //<itemName />\r\n                    </itemContentDiv>\r\n                </itemMainDiv>\r\n            </item>\r\n\t\t`;\r\n\t\t//conversation-name\r\n\t\tconst itemName = document.createElement('div');\r\n\t\titemName.classList.add('conversation-name');\r\n\t\titemName.innerHTML = `${msgObj.sender}`;\r\n\r\n\t\tconst dropdowmFrag = new DocumentFragment();\r\n\t\tconst dropdownData = [\r\n\t\t\t{ text: 'Copy', iconClass: 'file-copy' },\r\n\t\t\t{ text: 'Save', iconClass: 'save' },\r\n\t\t\t{ text: 'Forward', iconClass: 'chat-forward' },\r\n\t\t\t{ text: 'Delete', iconClass: 'delete-bin' }\r\n\t\t];\r\n\t\tdropdownData.forEach(data=>{\r\n\t\t\tconst dropdownItem = document.createElement('span');\r\n\t\t\tdropdownItem.addEventListener('click', this.onMessageCollection.bind(this, data.text, { id: msgObj._id, text: data.text }));\r\n\t\t\t//dropdownItem.addEventListener('click', this.deleteMessage.bind(this, msgObj._id));\r\n\t\t\tdropdownItem.setAttribute('role', 'button');\r\n\t\t\tdropdownItem.classList.add('dropdown-item');\r\n\t\t\tdropdownItem.innerHTML = `\r\n            \t${data.text}\r\n            \t<i class=\"ri-${data.iconClass}-line float-end text-muted\"></i>\r\n\t\t\t`;\r\n\t\t\tdropdowmFrag.appendChild(dropdownItem);\r\n\t\t});\r\n\r\n\t\t//dropdown-menu\r\n\t\tconst itemDropDowmMenu = document.createElement('div');\r\n\t\titemDropDowmMenu.classList.add('dropdown-menu');\r\n\t\titemDropDowmMenu.appendChild(dropdowmFrag);\r\n\r\n\t\t//dropdown\r\n\t\tconst itemContentWrapperDivTwo = document.createElement('div');\r\n\t\titemContentWrapperDivTwo.classList.add('dropdown', 'align-self-start');\r\n\t\titemContentWrapperDivTwo.insertAdjacentHTML(\r\n\t\t\t'afterbegin',\r\n\t\t\t`<span class=\"dropdown-toggle dropdown-click invisible\" role=\"button\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"ri-more-2-fill\"></i>\r\n            </span>`\r\n        );\r\n        itemContentWrapperDivTwo.insertAdjacentElement('beforeend', itemDropDowmMenu);\r\n\t\t\r\n\t\tconst cardInnerDivSubThree = document.createElement('div');\r\n        cardInnerDivSubThree.classList.add('ms-4', 'me-0', 'btn');\r\n        cardInnerDivSubThree.innerHTML = `\r\n        \t<span>\r\n                <i class=\"ri-download-2-line\"></i>\r\n            </span>\r\n        `;\r\n        cardInnerDivSubThree.addEventListener('click', ()=>{\r\n        \tthis.getFIle(this.updateFileURL(msgObj.fileURL), msgObj.message);\r\n        });\r\n\r\n        const cardInnerDivSubTwo = document.createElement('div');\r\n        cardInnerDivSubTwo.classList.add('flex-1');\r\n        cardInnerDivSubTwo.innerHTML = `\r\n\t        <div class=\"text-start\">\r\n                <h5 class=\"font-size-14 mb-1\">${msgObj.message}</h5>\r\n                <p class=\"text-muted font-size-13 mb-0\">${this.formatBytes(msgObj.fileSize)}</p>\r\n            </div>\r\n        `;\r\n\r\n        const cardInnerDivSubOne = document.createElement('div');\r\n        cardInnerDivSubOne.classList.add('avatar-sm', 'me-3', 'ms-0');\r\n        cardInnerDivSubOne.innerHTML = `\r\n        \t<div class=\"avatar-title bg-soft-primary text-primary rounded font-size-20\">\r\n                <i class=\"ri-file-text-fill\"></i>\r\n            </div>\r\n        `;\r\n        \r\n        const cardInnerDiv = document.createElement('li');\r\n        cardInnerDiv.classList.add('d-flex', 'align-items-center');\r\n        cardInnerDiv.appendChild(cardInnerDivSubOne);\r\n        cardInnerDiv.appendChild(cardInnerDivSubTwo);\r\n        cardInnerDiv.appendChild(cardInnerDivSubThree);\r\n\r\n        const card = document.createElement('ul');\r\n        card.classList.add('card', 'p-2', 'mb-2');\r\n        card.appendChild(cardInnerDiv);\r\n\r\n\t\t//ctext-wrap-content\r\n\t\tconst itemContentWrapperDivOne = document.createElement('div');\r\n\t\titemContentWrapperDivOne.classList.add('ctext-wrap-content');\r\n        itemContentWrapperDivOne.insertAdjacentElement('afterbegin', card);\r\n        itemContentWrapperDivOne.insertAdjacentHTML(\r\n        \t'beforeend',\r\n        \t`<p class=\"chat-time mb-0\"><i class=\"ri-time-line align-middle\"></i> <span class=\"align-middle\">${this.getTimeOnly(msgObj.timeSent)}</span></p>`\r\n        );\r\n\t\t\r\n\t\t//ctext-wrap\r\n\t\tconst itemContentWrapperDiv = document.createElement('div');\r\n\t\titemContentWrapperDiv.classList.add('ctext-wrap');\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivOne);\r\n\t\titemContentWrapperDiv.appendChild(itemContentWrapperDivTwo);\r\n\r\n\t\t//user-chat-content\r\n\t\tconst itemContentDiv = document.createElement('div');\r\n\t\titemContentDiv.classList.add('user-chat-content');\r\n\t\titemContentDiv.appendChild(itemContentWrapperDiv);\r\n\t\titemContentDiv.appendChild(itemName);\r\n\r\n\t\t//chat-avatar\r\n\t\tconst itemAvatarDiv = document.createElement('div');\r\n\t\titemAvatarDiv.classList.add('chat-avatar');\r\n\t\titemAvatarDiv.innerHTML = `\r\n        <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n            ${msgObj.sender.charAt(0).toUpperCase()}\r\n        </span>\r\n\t\t`;\r\n\r\n\t\t//conversation-list\r\n\t\tconst itemMainDiv = document.createElement('div');\r\n\t\titemMainDiv.classList.add('conversation-list');\r\n\t\titemMainDiv.appendChild(itemAvatarDiv);\r\n\t\titemMainDiv.appendChild(itemContentDiv);\t\t\r\n\r\n\t\tconst item = document.createElement('li');\r\n\r\n\t\titem.addEventListener('mouseover', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('touchstart', this.onHoverMessage.bind(this));\r\n\t\titem.addEventListener('mouseleave', this.onHoverLeaveMessage.bind(this));\r\n\t\titem.addEventListener('touchend', this.onHoverLeaveMessage.bind(this));\r\n\r\n\t\titem.dataset.id = `${msgObj._id}`;\r\n\t\titem.classList.add((msgObj.sender === this.messageData.sender)?  'right': 'irrelevant');\r\n\t\titem.appendChild(itemMainDiv);\r\n\r\n\r\n\t\t//OLD\r\n\t\tthis.messages && this.messages.appendChild(item);\r\n\t\t$('.chat-conversation .simplebar-content-wrapper').scrollTop(40000);\r\n\t}\r\n\tremoveMessage = (id: string): void =>{\r\n\t\tthis.resetDOMs(groupMessengerProps.messages);\r\n\t\tconst msgsChildren = this.messages.children;\r\n\t\tfor(let i = 0; i < msgsChildren.length; i++){\r\n\t\t\tif(msgsChildren[i].getAttribute('data-id') === id){\r\n\t\t\t\tmsgsChildren[i].remove();\r\n\t\t\t\t//figure out removing date line if no message on that date;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\taddTyping = (whoistyping: string): void=>{\r\n\t\tlet typingExist = false;\r\n\t\tthis.resetDOMs(groupMessengerProps.messages);\r\n\t\tconst msgsChildren = this.messages.children;\r\n\t\tfor(let i = 0; i < msgsChildren.length; i++){\r\n\t\t\tif(msgsChildren[i].getAttribute('data-id') === 'typing'){\r\n\t\t\t\ttypingExist = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//conversation-list\r\n\t\tconst itemMainDiv = document.createElement('div');\r\n\t\titemMainDiv.classList.add('conversation-list');\r\n\t\titemMainDiv.innerHTML = `\r\n            <div class=\"chat-avatar\">\r\n                <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n\t\t            ${whoistyping.charAt(0).toUpperCase()}\r\n\t\t        </span>\r\n            </div>\r\n            \r\n            <div class=\"user-chat-content\">\r\n                <div class=\"ctext-wrap\">\r\n                    <div class=\"ctext-wrap-content\">\r\n                        <p class=\"mb-0\">\r\n                            typing\r\n                            <span class=\"animate-typing\">\r\n                                <span class=\"dot\"></span>\r\n                                <span class=\"dot\"></span>\r\n                                <span class=\"dot\"></span>\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"conversation-name\">${whoistyping}</div>\r\n            </div>\r\n\t\t`;\r\n\t\tif(!typingExist){\r\n\t\t\tconst item = document.createElement('li');\r\n\t\t\titem.dataset.id = `typing`;\r\n\t\t\titem.appendChild(itemMainDiv);\r\n\t\t\tthis.messages && this.messages.appendChild(item);\r\n\t\t\t$('.chat-conversation .simplebar-content-wrapper').scrollTop(40000);\t\t\t\r\n\t\t}\r\n\t}\r\n\tremoveTyping = (): void=>{\r\n\t\tthis.resetDOMs(groupMessengerProps.messages);\r\n\t\tconst msgsChildren = this.messages.children;\r\n\t\tfor(let i = 0; i < msgsChildren.length; i++){\r\n\t\t\tif(msgsChildren[i].getAttribute('data-id') === 'typing'){\r\n\t\t\t\tmsgsChildren[i].remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetStatus = (username: string): void =>{\r\n\t\tthis.groupProfileName[0].innerHTML = `#${username}`;\r\n\t\tthis.groupProfileName[1].innerHTML = `#${username}`;\r\n\t\tthis.groupProfileName[2].innerHTML = `#${username}`;\r\n\t\tthis.groupProfileImgSmall.innerHTML = `\r\n                        <!-- <img src=\"/images/users/avatar-4.jpg\" class=\"rounded-circle avatar-xs\" alt=\"\"> -->\r\n                        <div class=\"chat-user-img online align-self-center me-1 ms-0\">\r\n\t                        <div class=\"avatar-xs\">\r\n\t\t                        <span class=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n\t\t                            ${username.charAt(0).toUpperCase()}\r\n\t\t                        </span>\r\n\t\t                    </div>\r\n\t                    </div>\r\n\t\t`;\r\n\t\tthis.groupProfileImgBig.innerHTML = `${username.charAt(0).toUpperCase()}`;\r\n\t\tthis.groupOnlineDot[0].classList.add('d-none');\r\n\t\tthis.groupOnlineDot[1].classList.add('d-none');\r\n\t\tdocument.querySelector('.group-description').innerHTML = this.groupDetails.description;\r\n\t\tdocument.querySelector('.created-by-div').classList.remove('d-none');\r\n\t\tdocument.querySelector('#about-details').classList.remove('d-none');\r\n\t\tdocument.querySelector('.chat-user-creator').innerHTML = this.groupDetails.creator;\r\n\r\n\t\tthis.setAdmins();\r\n\t\tthis.setUsers();\r\n\r\n\t\tconst addUContsListCh = document.querySelector('.add-user-group-contact-list').children;\r\n\t\tfor(let i= 0; i < addUContsListCh.length; i++){\r\n\t\t\tconst alreadyInGroup = this.groupDetails.users.some(user=>{\r\n\t\t\t\treturn addUContsListCh[i].children[0].children[0].id.split('-')[4] === user.username;\r\n\t\t\t});\r\n\t\t\tif(alreadyInGroup){\r\n\t\t\t\taddUContsListCh[i].remove();\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetAdmins = (): void=>{\r\n        const adminsList = document.querySelector('.chat-profile-admins-list');\r\n        adminsList.innerHTML = '';\r\n\t\tthis.groupDetails.admins.forEach((admin, index)=>{\r\n\t\t\tconst dropdowmFrag = new DocumentFragment();\r\n\t\t\tconst dropdownData = [\r\n\t\t\t\t{ text: 'Delete', iconClass: 'delete-bin' }\r\n\t\t\t];\r\n\t\t\tdropdownData.forEach(data=>{\r\n\t\t\t\tconst dropdownItem = document.createElement('span');\r\n\t\t\t\tdropdownItem.addEventListener('click', this.onRemoveAdmin.bind(this, admin.username));\r\n\t\t\t\tdropdownItem.setAttribute('role', 'button');\r\n\t\t\t\tdropdownItem.classList.add('dropdown-item');\r\n\t\t\t\tdropdownItem.innerHTML = `\r\n\t            \t${data.text}\r\n\t            \t<i class=\"ri-${data.iconClass}-line float-end text-muted\"></i>\r\n\t\t\t\t`;\r\n\t\t\t\tdropdowmFrag.appendChild(dropdownItem);\r\n\t\t\t});\r\n\r\n\t\t\t//dropdown-menu\r\n\t\t\tconst itemDropDowmMenu = document.createElement('div');\r\n\t\t\titemDropDowmMenu.classList.add('dropdown-menu');\r\n\t\t\titemDropDowmMenu.appendChild(dropdowmFrag);\r\n\r\n\t\t\tconst itemDropDown = document.createElement('div')\r\n\t\t\titemDropDown.classList.add('dropup');\r\n\t\t\titemDropDown.innerHTML = `\r\n\t\t\t\t<span class=\"text-muted dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" role='button'>\r\n                    <i class=\"ri-more-2-fill\"></i>\r\n                </span>\r\n\t\t\t`;\r\n\t\t\titemDropDown.appendChild(itemDropDowmMenu);\r\n\r\n\t\t\tconst itemMainDiv = document.createElement('div');\r\n\t\t\titemMainDiv.classList.add('d-flex', 'flex-row', 'align-items-center-4');\r\n\t\t\titemMainDiv.innerHTML = `\r\n                <div class=\"flex-1\">\r\n\t                <h5 class=\"font-size-14 m-auto pr-4\" id=\"profile-group-user-${admin.username}\">${admin.username}</h5>\r\n\t               </div>\r\n\t        `;\r\n\t\t\tthis.isAdmin() && itemMainDiv.appendChild(itemDropDown);\r\n\r\n\t\t\tconst item = document.createElement('li');\r\n\t\t\titem.classList.add('mb-4', 'position-relative');\r\n\t\t\tif(index === 0){\r\n\t\t\t\titem.classList.add('mt-5');\r\n\t\t\t}\r\n\t\t\titem.appendChild(itemMainDiv);\r\n            adminsList.appendChild(item);\r\n\t\t});\r\n\t}\r\n\tsetUsers = (): void=>{\r\n\t    const userList = document.querySelector('.chat-profile-users-list');\r\n\t\tif(this.isAdmin()){\r\n\t        userList.innerHTML = `\r\n\t        \t<button type=\"button\" class=\"btn btn-link text-decoration-none text-muted font-size-18 py-0\" data-bs-toggle=\"modal\" data-bs-target=\"#addUserTogroup\">\r\n\t                <i class=\"ri-user-add-line\"></i>\r\n\t            </button>\r\n\t        `;\r\n\t    }else {\r\n\t    \tuserList.innerHTML = '';\r\n\t    }\r\n\t\tthis.groupDetails.users.forEach((user, index)=>{\r\n\t\t\tconst dropdowmFrag = new DocumentFragment();\r\n\t\t\tconst dropdownData = [\r\n\t\t\t\t{ text: 'Make Admin', iconClass: 'arrow-drop-up' },\r\n\t\t\t\t{ text: 'Delete', iconClass: 'delete-bin' }\r\n\t\t\t];\r\n\t\t\tdropdownData.forEach(data=>{\r\n\t\t\t\tconst dropdownItem = document.createElement('span');\r\n\t\t\t\tif(data.text === 'Delete'){\r\n\t\t\t\t\tdropdownItem.addEventListener('click', this.onRemoveUser.bind(this, user.username));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdropdownItem.addEventListener('click', this.onAddAdmin.bind(this, user.username));\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tdropdownItem.setAttribute('role', 'button');\r\n\t\t\t\tdropdownItem.classList.add('dropdown-item');\r\n\t\t\t\tdropdownItem.innerHTML = `\r\n\t            \t${data.text}\r\n\t            \t<i class=\"ri-${data.iconClass}-line float-end text-muted\"></i>\r\n\t\t\t\t`;\r\n\t\t\t\tdropdowmFrag.appendChild(dropdownItem);\r\n\t\t\t});\r\n\r\n\t\t\t//dropdown-menu\r\n\t\t\tconst itemDropDowmMenu = document.createElement('div');\r\n\t\t\titemDropDowmMenu.classList.add('dropdown-menu');\r\n\t\t\titemDropDowmMenu.appendChild(dropdowmFrag);\r\n\r\n\t\t\tconst itemDropDown = document.createElement('div')\r\n\t\t\titemDropDown.classList.add('dropup');\r\n\t\t\titemDropDown.innerHTML = `\r\n\t\t\t\t<span class=\"text-muted dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" role='button'>\r\n                    <i class=\"ri-more-2-fill\"></i>\r\n                </span>\r\n\t\t\t`;\r\n\t\t\titemDropDown.appendChild(itemDropDowmMenu);\r\n\r\n\t\t\tconst itemMainDiv = document.createElement('div');\r\n\t\t\titemMainDiv.classList.add('d-flex', 'flex-row', 'align-items-center-4');\r\n\t\t\titemMainDiv.innerHTML = `\r\n                <div class=\"flex-1\">\r\n                    <h5 class=\"font-size-14 m-auto\" id=\"profile-group-user-${user.username}\">${user.username}</h5>\r\n                </div>\r\n            `;\r\n\t\t\tthis.isAdmin() && itemMainDiv.appendChild(itemDropDown);\r\n\r\n\r\n\t\t\tconst item = document.createElement('li');\r\n\t\t\titem.classList.add('mb-4', 'position-relative');\r\n\t\t\tif(index === 0){\r\n\t\t\t\titem.classList.add('mt-5');\r\n\t\t\t}\r\n\t\t\titem.appendChild(itemMainDiv);\r\n            userList.appendChild(item);\r\n\t\t});\r\n\t}\r\n\taddFileAttachmentsProfile = (attachMsg: IMsg): void=>{\r\n\t\tconst cardInnerDivSubThree = document.createElement('div');\r\n        cardInnerDivSubThree.classList.add('ms-4', 'me-0', 'btn');\r\n        cardInnerDivSubThree.innerHTML = `\r\n        \t<span>\r\n                <i class=\"ri-download-2-line\"></i>\r\n            </span>\r\n        `;\r\n        cardInnerDivSubThree.addEventListener('click', ()=>{\r\n        \tthis.getFIle(this.updateFileURL(attachMsg.fileURL), attachMsg.message);\r\n        });\r\n\r\n        const cardInnerDivSubTwo = document.createElement('div');\r\n        cardInnerDivSubTwo.classList.add('flex-1');\r\n        cardInnerDivSubTwo.innerHTML = `\r\n\t        <div class=\"text-start\">\r\n                <h5 class=\"font-size-14 mb-1 text-truncate\">${attachMsg.message}</h5>\r\n                <p class=\"text-muted font-size-13 mb-0\">${this.formatBytes(attachMsg.fileSize)}</p>\r\n            </div>\r\n        `;\r\n\r\n        const cardInnerDivSubOne = document.createElement('div');\r\n        cardInnerDivSubOne.classList.add('avatar-sm', 'me-3', 'ms-0');\r\n        cardInnerDivSubOne.innerHTML = `\r\n        \t<div class=\"avatar-title bg-soft-primary text-primary rounded font-size-20\">\r\n                ${(attachMsg.typeOfMsg === MsgTypeEnum.img)? '<i class=\"ri-image-fill\"></i>': '<i class=\"ri-file-text-fill\"></i>'}\r\n            </div>\r\n        `;\r\n        \r\n        const cardInnerDiv = document.createElement('li');\r\n        cardInnerDiv.classList.add('d-flex', 'align-items-center');\r\n        cardInnerDiv.appendChild(cardInnerDivSubOne);\r\n        cardInnerDiv.appendChild(cardInnerDivSubTwo);\r\n        cardInnerDiv.appendChild(cardInnerDivSubThree);\r\n\r\n        const card = document.createElement('ul');\r\n        card.classList.add('card', 'p-2', 'mb-2');\r\n        card.appendChild(cardInnerDiv);\r\n\r\n\t\t//ctext-wrap-content\r\n\t\tconst item = document.createElement('div');\r\n\t\titem.classList.add('ctext-wrap-content');\r\n        item.insertAdjacentElement('afterbegin', card);\r\n        document.querySelector('.chat-profile-attached-files').appendChild(item);\r\n\t}\r\n\tdisplayMsgsDate = (dateToDisplay: string): void =>{\r\n\t\tconst itemMainDiv = document.createElement('div');\r\n\t\tconst content = `\r\n\t\t\t<span class=\"title\"> ${dateToDisplay} </span>\r\n\t\t`;\r\n\t\titemMainDiv.classList.add('chat-day-title');\r\n\t\titemMainDiv.innerHTML = content;\r\n\r\n\t\tconst item = document.createElement('li');\r\n\r\n\t\titem.appendChild(itemMainDiv);\r\n\t\titem.dataset.id = `date`;\r\n\t\tthis.messages && this.messages.appendChild(item);\r\n\t\twindow.scrollTo(0, document.body.scrollHeight);\r\n\t}\r\n\trefreshGroupProfile = (): void=>{\r\n\t\tthis.getGroupDetails();\r\n \t\tsetTimeout(()=>{\r\n\t\t\tthis.setAdmins();\r\n\t\t\tthis.setUsers();\r\n \t\t}, 10000);\r\n\t}\r\n\tshowAddUserGroupLoader = (): void =>{\r\n\t\tconst itemLoaderDiv = document.createElement('div');\r\n\t\titemLoaderDiv.classList.add('Loader', 'new-group-loader');\r\n\t\tthis.addUserGroupSubmitButton.innerHTML = '';\r\n\t\tthis.addUserGroupSubmitButton.appendChild(itemLoaderDiv);\r\n\t}\r\n\tremoveAddUserGroupLoader = (): void =>{\r\n\t\tconst itemLoaderDiv = document.querySelector('.new-group-loader');\r\n\t\tthis.addUserGroupSubmitButton && this.addUserGroupSubmitButton.removeChild(itemLoaderDiv);\r\n\t\tthis.addUserGroupSubmitButton.innerHTML = 'Add Users';\r\n\t}\r\n\r\n\t//event listeners\r\n\tonAddSendTextMessage = (): void =>{ this.form && this.form.addEventListener('submit', this.onSendTextSubmitCallBack); }\r\n\tonRemoveSendTextMessage = (): void=>{ this.form.removeEventListener('submit', this.onSendTextSubmitCallBack); }\r\n\tonSendTextSubmitCallBack = (e: Event)=>{\r\n\t\te.preventDefault();\r\n\t\tif(this.msgInput && this.msgInput.value){\r\n\t\t\t//this.socket.emit('message', this.nameInput.value);\r\n\t\t\tthis.setMessageData();\r\n\t\t\tthis.socketOnSendTyping(false);\r\n\t\t\tconst data = {\r\n\t\t\t\t...this.messageData,\r\n\t\t\t\ttypeOfMsg: MsgTypeEnum.text\r\n\t\t\t}\r\n\t\t\tthis.postTextMessage(data);\r\n\t\t}\r\n\t}\r\n\tonSubmitCallBackBinded = this.onSendTextSubmitCallBack.bind(this);\r\n\tonAddSendFileMessage = (): void =>{ this.fileForm && this.fileForm.addEventListener('submit', this.onSendFileSubmitCallBack); }\r\n\tonRemoveSendFileMessage = (): void=>{ this.fileForm.removeEventListener('submit', this.onSendFileSubmitCallBack); }\r\n\tonSendFileSubmitCallBack = (e: Event)=>{\r\n\t\te.preventDefault();\r\n\t\tif(this.attachBtn && this.attachBtn.files.length > 0 && this.attachBtn.files[0]){\r\n\t\t\tconst file = this.attachBtn.files[0];\r\n\t\t\tthis.setMessageData();\r\n\t\t\tthis.socketOnSendTyping(false);\r\n\r\n\t\t\tconst fd = new FormData();\r\n\t\t\tfd.append('msg', file.name);\r\n\t\t\tfd.append('sender', this.getCurrentUser().username);\r\n\t\t\tfd.append('receiver', this.groupname);\r\n\t\t\tif(file.type.includes('image')){\r\n\t\t\t\tfd.append('typeOfMsg', MsgTypeEnum.img);\r\n\t\t\t}else {\r\n\t\t\t\tfd.append('typeOfMsg', MsgTypeEnum.otherfile);\r\n\t\t\t}\r\n\t\t\tfd.append('fileURL', file);\r\n\r\n\t\t\t(document.querySelector('.sendfile-btn-close') as HTMLButtonElement).click();\r\n\t\t\tthis.postOtherMessage(fd);\r\n\t\t}\r\n\t}\r\n\tonTypingRelated = (): void=>{\r\n\t\t// Returns a function, that, as long as it continues to be invoked, will not\r\n\t\t// be triggered. The function will be called after it stops being called for\r\n\t\t// N milliseconds. If `immediate` is passed, trigger the function on the\r\n\t\t// leading edge, instead of the trailing.\r\n\t\t\r\n\t\t//important\r\n\t\tthis.msgInput && this.msgInput.addEventListener('keydown', this.onKeydownCallback.bind(this, 'add'));\r\n\t\t// This will apply the debounce effect on the keyup event\r\n\t\t// And it only fires 500ms or half a second after the user stopped typing\r\n\t\tthis.msgInput && this.msgInput.addEventListener('keyup', this.onKeyupCallback.bind(this, 'add'));\r\n\t}\r\n\tonTypingRelatedRemove = (): void=>{\r\n\t\tthis.msgInput.removeEventListener('keydown', this.onKeydownCallback.bind(this, 'add'));\r\n\t\tthis.msgInput.removeEventListener('keyup', this.onKeyupCallback.bind(this, 'add'));\r\n\t}\r\n\tonKeydownCallback = (type: string, e: Event): void=>{\r\n\t\tif(type === 'add'){\r\n\t\t\tthis.socketOnSendTyping(true);\r\n\t\t}\r\n\t}\r\n\tonKeyupCallback = (type: string, e: Event): void=>{\r\n\t\tif(type === 'add'){\r\n\t\t\tthis.debounce(()=>{\r\n\t\t\t\tthis.socketOnSendTyping(false);\r\n\t\t\t}, 5000, 0)\r\n\t\t\tthis.socketOnSendTyping(true);\r\n\t\t}\r\n\t}\r\n\tonAttchBtnClick = (): void=>{\r\n\t\tthis.attachBtn.addEventListener('change', (e)=>{\r\n\t\t\tconst file = (e.target as HTMLInputElement).files[0];\r\n\t\t\t//console.log(file);\r\n\t\t\tconst addModalBtn = document.createElement('button');\r\n\t\t\tif(file.size > 5242880){\r\n\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#filetolarge');\r\n\t\t\t}else{\r\n\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#sendfile');\r\n\t\t\t}\r\n\t\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\t\tdocument.body.appendChild(addModalBtn);\r\n\t\t\tdocument.querySelectorAll('.file-name')[0].innerHTML = file && file.name;\r\n\t\t\tdocument.querySelectorAll('.file-name')[1].innerHTML = file && file.name;\r\n\t\t\tdocument.querySelectorAll('.file-size')[0].innerHTML = file && this.formatBytes(file.size);\r\n\t\t\tdocument.querySelectorAll('.file-size')[1].innerHTML = file && this.formatBytes(file.size);\r\n\t\t\taddModalBtn.click();\r\n\t\t\tdocument.body.removeChild(addModalBtn);\r\n\t\t});\r\n\t}\r\n\tonMessageCollection = (type: string, otherData: MessageCollectionOption, e: Element): void=>{\r\n\t\tswitch (type) {\r\n\t\t\tcase \"Delete\":\r\n\t\t\t\tthis.deleteMessage(otherData.id, e);\r\n\t\t\t\tbreak;\t\t\t\r\n\t\t\tcase \"Copy\":\r\n\t\t\t\tthis.onCopy(otherData.text, e);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t// code...\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tonCopy = (text: string, e: Element): void=>{\r\n\t\tconst fallbackCopy = (text: string): void=>{\r\n\t\t\tlet textArea = document.createElement('textarea');\r\n\t\t\ttextArea.value = text;\r\n\r\n\t\t\ttextArea.style.top = '0';\r\n\t\t\ttextArea.style.left = '0';\r\n\t\t\ttextArea.style.position = 'fixed';\r\n\t\t\tdocument.appendChild(textArea);\r\n\t\t\ttextArea.focus();\r\n\t\t\ttextArea.select();\r\n\t\t\ttextArea.setSelectionRange(0, 9999999);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar successful = document.execCommand('copy');\r\n\t\t\t\tvar msg = successful ? 'successful' : 'unsuccessful';\r\n\t\t\t\t//console.log('Fallback: Copying text command was ' + msg);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Fallback: Oops, unable to copy', err);\r\n\t\t\t}\r\n\t\t\tdocument.body.removeChild(textArea);\r\n\t\t}\r\n\t\tif (!navigator.clipboard) {\r\n\t\t\tfallbackCopy(text);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnavigator.clipboard.writeText(text).then(function() {\r\n\t\t\t//console.log('Async: Copying to clipboard was successful!');\r\n\t\t}, function(err) {\r\n\t\t\tconsole.error('Async: Could not copy text: ', err);\r\n\t\t});\r\n\t}\r\n\tonHoverMessage = (e: Event): void=>{\r\n\t\t//console.log(e.type);\r\n\t\t//console.log(e.target);\r\n\t\tconst dropdown = <Element>e.target;\r\n\t\tif(dropdown.classList.contains('ctext-wrap-content')){\r\n\t\t\tdropdown.nextElementSibling.children[0].classList.add('visible');\r\n\t\t\tdropdown.nextElementSibling.children[0].classList.remove('invisible');\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tdropdown.nextElementSibling.children[0].classList.remove('visible');\r\n\t\t\t\tdropdown.nextElementSibling.children[0].classList.add('invisible');\r\n\t\t\t}, 20000);\r\n\t\t}\r\n\t}\r\n\tonHoverLeaveMessage = (e: Event): void=>{\r\n\t\tconst dropdown = <Element>e.target;\r\n\t\tif(dropdown.classList.contains('ctext-wrap-content')){\r\n\t\t\tdropdown.nextElementSibling.children[0].classList.remove('visible');\r\n\t\t\tdropdown.nextElementSibling.children[0].classList.add('invisible');\t\t\t\r\n\t\t}\r\n\t}\r\n\tonAddUserGroupSubmitForm = (): void=>{\r\n\t\tthis.addUserToGroupForm.addEventListener('submit', (e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.showAddUserGroupLoader();\r\n\t\t\tconst formEle = this.addUserToGroupForm.elements;\r\n\t\t\tfor(let i = 0; i < formEle.length; i++){\r\n\t\t\t\tif((formEle[i] as HTMLInputElement).checked){\r\n\t\t\t\t\tconst formEleItem: Element = formEle[i];\r\n\t\t\t\t\tconst username = (formEleItem as NonDocumentTypeChildNode).nextElementSibling.innerHTML;\r\n\t\t\t\t\tthis.addUserToGroup({ username });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$('#addUserTogroup').modal('hide');\r\n\t\t\tthis.removeAddUserGroupLoader();\r\n\t\t});\r\n\t}\r\n\tonAddAdmin = (username: string): void=>{\r\n\t\tthis.addAdminToGroup({ username });\r\n\t}\r\n\tonRemoveAdmin = (username: string): void=>{\r\n\t\tthis.removeAdminFromGroup({ username });\r\n\t}\r\n\tonAddUser = (username: string): void=>{\r\n\t\tthis.addUserToGroup({ username });\r\n\t}\r\n\tonRemoveUser = (username: string): void=>{\r\n\t\tthis.removeUserFromGroup({ username });\r\n\t}\r\n\r\n\t//ajax\r\n\taddAdminToGroup = (data): void=>{\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.post(`/api/group/add-admin/${receiver}`, data)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t \t\tthis.refreshGroupProfile();\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tremoveAdminFromGroup = (data): void=>{\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.post(`/api/group/remove-admin/${receiver}`, data)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t \t\tthis.refreshGroupProfile();\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\taddUserToGroup = (data): void=>{\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.post(`/api/group/add-user/${receiver}`, data)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t \t\tthis.refreshGroupProfile();\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tremoveUserFromGroup = (data): void=>{\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.post(`/api/group/remove-user/${receiver}`, data)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t \t\tthis.refreshGroupProfile();\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetGroupDetails = (): void=>{\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.get(`/api/group/details/${receiver}`)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t\t \tthis.groupDetails = response.data.group;\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetGroupMessage = (): void => {\r\n\t\tif(this.messages){\r\n\t\t\tthis.messages.innerHTML = '';\r\n\t\t}\r\n\t\tconst { receiver } = this.messageData;\r\n\t\t$.get(`/api/group/messages/all/${receiver}`)\r\n\t\t .done((response)=>{\r\n\t\t \tconst messages: IMsg[] = response.data.messages;\r\n\t\t \tif(messages.length === 0){\r\n\t\t \t\tthis.messages.innerHTML = 'Welcome to your chatroom, use the input box below to start sending your messages';\r\n\t\t \t}\r\n\t\t\tthis.lastDate = '';\r\n\t\t \tmessages.forEach(msg=>{\r\n\t\t\t\tmsg.timeSent = this.changeDate(msg);\r\n\t\t\t\tlet today  = new Date().toDateString().substr(4);\r\n\t\t\t\tif(today !== msg.timeSent.toDateString().substr(4)){\r\n\t\t\t\t\tif(!this.lastDate || this.lastDate !== msg.timeSent.toDateString().substr(4)){\r\n\t\t\t\t\t\tthis.displayMsgsDate(msg.timeSent.toDateString().substr(4));\r\n\t\t\t\t\t\tthis.lastDate = msg.timeSent.toDateString().substr(4);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!this.lastDate || this.lastDate !== msg.timeSent.toDateString().substr(4)){\r\n\t\t\t\t\t\tthis.displayMsgsDate('Today');\r\n\t\t\t\t\t\tthis.lastDate = msg.timeSent.toDateString().substr(4);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.addMessage(msg);\r\n\t\t \t});\r\n\t\t\t$('.chat-conversation .simplebar-content-wrapper').scrollTop(40000);\r\n\t\t }).fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tdeleteMessage = (id: number, e: Element) =>{\r\n\t\t$.ajax({\r\n\t\t\turl: `/api/message/${id}`,\r\n\t\t\ttype: 'DELETE'\r\n\t\t}).done(response=>{\r\n\t\t\t//console.log(response);\r\n\t\t}).fail(err=>{\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\tpostTextMessage = (data): void =>{\r\n\t\t$.post('/api/group/message', data)\r\n\t\t .done((response)=>{\r\n\t\t\tif(response.data.success){\r\n\t\t\t\tthis.msgInput.value = '';\r\n\t\t\t}\r\n\t\t }).fail(err=>{\r\n\t\t\tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tpostOtherMessage = (data): void =>{\r\n\t\t$.post({\r\n\t\t\turl: '/api/group/message',\r\n\t\t\tdata: data,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false\r\n\t\t}).done((response)=>{\r\n\t\t\tif(response.data.success){\r\n\t\t\t\tthis.msgInput.value = '';\r\n\t\t\t}\r\n\t\t}).fail(err=>{\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\tclearUnreadMsg = (): void=>{\r\n\t\tconst data = {\r\n\t\t\tsender: this.messageData.sender,\r\n\t\t\treceiver: this.messageData.receiver\r\n\t\t};\r\n\t\t$.post('/api/user/clear-unread', data)\r\n\t\t .done((response)=>{\r\n\t\t \tif(response.data.success){\r\n\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t\t\tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetAttachmentMessages = (username: string): void=>{\r\n\t\tdocument.querySelector('.chat-profile-attached-files').innerHTML = '';\r\n\t\t$.get(`/api/messages/attachment/${username}`)\r\n\t\t .done(response=>{\r\n\t\t \tconst messages: IMsg[] = response.data.messages;\r\n\t\t \tif(messages){\r\n\t\t \t\tmessages.forEach(msg=>{\r\n\t\t\t\t\tmsg.timeSent = this.changeDate(msg);\r\n\t\t \t\t\tthis.addFileAttachmentsProfile(msg);\r\n\t\t \t\t});\r\n\t\t \t}\r\n\t\t })\r\n\t\t .fail(err=>{\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetFIle = (url: string, filename: string): void=>{\r\n\t\t$.ajax({\r\n\t\t\turl: url,\r\n\t\t\txhrFields: {\r\n\t\t\t\tresponseType: 'blob'\r\n\t\t\t},\r\n\t\t\tsuccess: (response)=>{\r\n\t        \t//@ts-ignore\r\n\t\t\t\tfileDownload(response, filename);\r\n\t\t\t},\r\n\t\t\terror: ()=>{}\r\n\t\t});\r\n\t}\r\n\r\n\t//utils\r\n\tisAdmin = (): boolean=>{\r\n\t\tthis.getGroupDetails();\r\n\t\tconst { username } = this.getCurrentUser();\r\n\t\treturn !this.groupDetails.admins.some(admin=>{\r\n\t\t\t\t\treturn admin.username !== username;\r\n\t\t\t\t});\r\n\t}\r\n\tdebounce = function (func, wait, immediate) {\r\n\t\tvar timeout;\r\n\t\treturn function() {\r\n\t\t\tvar context = this, args = arguments;\r\n\t\t\tvar later = function() {\r\n\t\t\t\ttimeout = null;\r\n\t\t\t\tif (!immediate) func.apply(context, args);\r\n\t\t\t};\r\n\t\t\tvar callNow = immediate && !timeout;\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\ttimeout = setTimeout(later, wait);\r\n\t\t\tif (callNow) func.apply(context, args);\r\n\t\t};\r\n\t};\r\n\tchangeDate = (msg: IMsg): Date =>{ return new Date(msg.timeSent); }\r\n\tgetTimeOnly = (dateObj: Date): string =>{ \r\n\t\treturn `\r\n\t\t\t${dateObj.getHours()}:${(dateObj.getMinutes()<10)? \r\n\t\t\t\t'0' + dateObj.getMinutes(): dateObj.getMinutes()}\r\n\t\t`; \r\n\t}\r\n\tformatBytes = (bytes, decimals = 2): string =>{\r\n\t    if (bytes === 0) return '0 Bytes';\r\n\r\n\t    const k = 1024;\r\n\t    const dm = decimals < 0 ? 0 : decimals;\r\n\t    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n\t    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n\t    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n\t}\r\n    getCurrentUser = (): StorageUser=>{ return JSON.parse(localStorage.getItem('chatapp-user')); }\r\n    userAvailable = (): boolean=>{\r\n    \tif(JSON.parse(localStorage.getItem('chatapp-user'))){\r\n    \t\treturn true;\r\n    \t}\r\n    \treturn false;\r\n    }\r\n\tupdateFileURL(fileURL: string){\r\n\t\tif(window.location.origin === 'http://localhost:8080' || window.location.origin === 'http://192.168.43.240:8080'){\r\n\t\t\treturn 'api/' + fileURL;\r\n\t\t}\r\n\t\treturn fileURL;\r\n\t}\r\n\tgetIndexPage = (): void =>{ window.location.href = '/'; }\r\n\tgetLoginPage = (): void =>{ window.location.href = '/login'; }\r\n}"]}